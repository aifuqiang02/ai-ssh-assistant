<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown 功能测试</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }

        .test-message {
            background: #2d2d2d;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
        }

        .test-message h3 {
            margin-top: 0;
            color: #569cd6;
        }

        pre {
            background: #1e1e1e;
            border: 1px solid #404040;
            border-radius: 4px;
            padding: 12px;
            overflow-x: auto;
            font-size: 13px;
        }

        code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }

        .button {
            background: #0e639c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 8px;
        }

        .button:hover {
            background: #1177bb;
        }

        .success {
            color: #4ec9b0;
        }

        .info {
            background: #264f78;
            border-left: 3px solid #007acc;
            padding: 12px;
            margin: 12px 0;
        }

        .checklist {
            list-style: none;
            padding-left: 0;
        }

        .checklist li::before {
            content: '☐ ';
            color: #888;
        }

        .checklist li.done::before {
            content: '✓ ';
            color: #4ec9b0;
        }
    </style>
</head>

<body>
    <h1>🎨 Markdown 渲染功能测试指南</h1>

    <div class="info">
        <strong>测试目的：</strong> 验证 AI Chat 中的 Markdown 渲染、代码块复制和文本选择功能
    </div>

    <div class="test-message">
        <h3>📋 测试消息 1: 基础代码块</h3>
        <p>复制以下内容并发送给 AI：</p>
        <pre><code>请用 JavaScript 实现一个斐波那契数列函数，并展示代码。</code></pre>
        <p><strong>预期结果：</strong></p>
        <ul class="checklist">
            <li>AI 返回的代码块有独立复制按钮</li>
            <li>点击复制按钮可以复制代码</li>
            <li>代码有语法高亮</li>
        </ul>
    </div>

    <div class="test-message">
        <h3>🔤 测试消息 2: 多代码块</h3>
        <p>复制以下内容并发送给 AI：</p>
        <pre><code>请分别用 Python 和 JavaScript 实现快速排序算法。</code></pre>
        <p><strong>预期结果：</strong></p>
        <ul class="checklist">
            <li>两个代码块各有自己的复制按钮</li>
            <li>代码块正确识别语言（Python / JavaScript）</li>
            <li>语法高亮正确</li>
        </ul>
    </div>

    <div class="test-message">
        <h3>📝 测试消息 3: Markdown 混合内容</h3>
        <p>直接发送以下 Markdown 内容：</p>
        <pre><code>请解释以下概念：

## React Hooks

React Hooks 是 React 16.8 引入的新特性：

- **useState**: 状态管理
- **useEffect**: 副作用处理
- **useContext**: 上下文访问

示例代码：

```javascript
import { useState, useEffect } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  
  useEffect(() => {
    document.title = `Count: ${count}`
  }, [count])
  
  return (
    <button onClick={() => setCount(count + 1)}>
      {count}
    </button>
  )
}
```

参考链接：[React 官方文档](https://react.dev)
</code></pre>
        <p><strong>预期结果：</strong></p>
        <ul class="checklist">
            <li>标题正确渲染（##）</li>
            <li>列表正确缩进</li>
            <li>代码块有复制按钮</li>
            <li>链接可点击</li>
            <li>粗体文本正确显示（**）</li>
        </ul>
    </div>

    <div class="test-message">
        <h3>✂️ 测试消息 4: 文本选择</h3>
        <p>发送任意消息后：</p>
        <ol>
            <li>尝试用鼠标选中 AI 回复的部分文字</li>
            <li>使用 Ctrl/Cmd + C 复制</li>
            <li>粘贴到文本编辑器验证</li>
        </ol>
        <p><strong>预期结果：</strong></p>
        <ul class="checklist">
            <li>可以选中任意文本</li>
            <li>选中时有蓝色高亮背景</li>
            <li>复制的内容完整准确</li>
        </ul>
    </div>

    <div class="test-message">
        <h3>🎯 完整功能检查清单</h3>
        <ul class="checklist">
            <li>[ ] 代码块独立复制按钮显示</li>
            <li>[ ] 复制按钮点击后变为 ✓ 图标</li>
            <li>[ ] 复制的代码内容正确</li>
            <li>[ ] 代码语言正确识别</li>
            <li>[ ] 语法高亮颜色正确</li>
            <li>[ ] 行数信息显示（X lines）</li>
            <li>[ ] 文本可以自由选择</li>
            <li>[ ] 选择时有高亮背景</li>
            <li>[ ] Markdown 列表正确渲染</li>
            <li>[ ] Markdown 链接正确渲染</li>
            <li>[ ] Markdown 表格正确渲染</li>
            <li>[ ] 引用块有左侧边框</li>
            <li>[ ] 代码块滚动条正常</li>
            <li>[ ] 主题颜色适配 VSCode</li>
        </ul>
    </div>

    <div class="info" style="margin-top: 30px;">
        <h3 class="success">🚀 快速测试</h3>
        <p>使用以下按钮快速复制测试消息：</p>
        <button class="button" onclick="copyToClipboard('请用 JavaScript 实现一个斐波那契数列函数，并展示代码。')">
            复制测试 1
        </button>
        <button class="button" onclick="copyToClipboard('请分别用 Python 和 JavaScript 实现快速排序算法。')">
            复制测试 2
        </button>
        <button class="button" onclick="copyToClipboard(getTest3Content())">
            复制测试 3
        </button>
    </div>

    <script>
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('✓ 已复制到剪贴板！\n\n现在可以粘贴到 AI Chat 中测试。')
            }).catch(err => {
                console.error('复制失败:', err)
                alert('❌ 复制失败，请手动复制。')
            })
        }

        function getTest3Content() {
            return `请解释以下概念：

## React Hooks

React Hooks 是 React 16.8 引入的新特性：

- **useState**: 状态管理
- **useEffect**: 副作用处理
- **useContext**: 上下文访问

示例代码：

\`\`\`javascript
import { useState, useEffect } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  
  useEffect(() => {
    document.title = \`Count: \${count}\`
  }, [count])
  
  return (
    <button onClick={() => setCount(count + 1)}>
      {count}
    </button>
  )
}
\`\`\`

参考链接：[React 官方文档](https://react.dev)`
        }

        // 键盘快捷键支持
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === '1') {
                    e.preventDefault()
                    copyToClipboard('请用 JavaScript 实现一个斐波那契数列函数，并展示代码。')
                } else if (e.key === '2') {
                    e.preventDefault()
                    copyToClipboard('请分别用 Python 和 JavaScript 实现快速排序算法。')
                } else if (e.key === '3') {
                    e.preventDefault()
                    copyToClipboard(getTest3Content())
                }
            }
        })

        console.log('💡 提示：使用 Ctrl/Cmd + 1/2/3 快速复制测试消息')
    </script>

    <footer
        style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #404040; color: #888; text-align: center;">
        <p>🔧 Markdown 渲染功能测试 | AI SSH Assistant | 2025</p>
        <p style="font-size: 12px;">
            快捷键：Ctrl/Cmd + 1/2/3 快速复制测试消息
        </p>
    </footer>
</body>

</html>